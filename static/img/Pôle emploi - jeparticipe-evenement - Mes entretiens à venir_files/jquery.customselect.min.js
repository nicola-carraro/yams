/*!
 * jquery.customSelect() - v0.5.1
 * http://adam.co/lab/jquery/customselect/
 * 2014-04-19
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License 
 */
(function(b){b.fn.extend({customSelect:function(j){if(typeof document.body.style.maxHeight==="undefined"){return this}var h={customClass:"customSelect",mapClass:true,mapStyle:true},j=b.extend(h,j),i=j.customClass,g=function(f,c){var l=f.find(":selected"),d=c.children(":first"),e=l.html()||"&nbsp;";d.html(e);if(l.attr("disabled")){c.addClass(a("DisabledOption"))}else{c.removeClass(a("DisabledOption"))}setTimeout(function(){c.removeClass(a("Open"));b(document).off("mouseup.customSelect")},60)},a=function(c){return i+c};return this.each(function(){var e=b(this),c=b("<span />").addClass(a("Inner")),d=b("<span />");e.after(d.append(c));d.addClass(i);if(j.mapClass){d.addClass(e.attr("class"))}if(j.mapStyle){d.attr("style",e.attr("style"))}e.addClass("hasCustomSelect").on("render.customSelect",function(){g(e,d);e.css("width","");var f=parseInt(e.outerWidth(),10)-(parseInt(d.outerWidth(),10)-parseInt(d.width(),10));d.css({display:"inline-block"});var l=d.outerHeight();if(e.attr("disabled")){d.addClass(a("Disabled"))}else{d.removeClass(a("Disabled"))}c.css({width:f,display:"inline-block"});e.css({"-webkit-appearance":"menulist-button",width:d.outerWidth(),position:"absolute",opacity:0,height:l,fontSize:d.css("font-size")})}).on("change.customSelect",function(){d.addClass(a("Changed"));g(e,d)}).on("keyup.customSelect",function(f){if(!d.hasClass(a("Open"))){e.trigger("blur.customSelect");e.trigger("focus.customSelect")}else{if(f.which==13||f.which==27){g(e,d)}}}).on("mousedown.customSelect",function(){d.removeClass(a("Changed"))}).on("mouseup.customSelect",function(f){if(!d.hasClass(a("Open"))){if(b("."+a("Open")).not(d).length>0&&typeof InstallTrigger!=="undefined"){e.trigger("focus.customSelect")}else{d.addClass(a("Open"));f.stopPropagation();b(document).one("mouseup.customSelect",function(l){if(l.target!=e.get(0)&&b.inArray(l.target,e.find("*").get())<0){e.trigger("blur.customSelect")}else{g(e,d)}})}}}).on("focus.customSelect",function(){d.removeClass(a("Changed")).addClass(a("Focus"))}).on("blur.customSelect",function(){d.removeClass(a("Focus")+" "+a("Open"))}).on("mouseenter.customSelect",function(){d.addClass(a("Hover"))}).on("mouseleave.customSelect",function(){d.removeClass(a("Hover"))}).trigger("render.customSelect")})}})})(jQuery);